# 示例部署配置，仅供参考，请根据实际环境修改

# AWS / EC2 基本配置
region: ap-southeast-1
ami: ami-0d5d4434d0110b7e1
instanceType: c6a.xlarge
keyName: your-pem-key-name                # 对应本地 ~/.ssh/your-pem-key-name.pem
securityGroupId: your-security-group-id
tagPrefix: your-tag-prefix

# 运行与 SSH
runDuration: 50m                         # 计划关机时间（time.Duration 格式），会转成 sudo -n shutdown -h +N
sshUser: ubuntu
sshKeyDir: ""                            # 为空则默认使用 ~/.ssh
logDir: logs

# services 为一个数组，每个元素表示一种 service 类型及其数量和命令
services:
  # 1) OP 部署：不显式设置 remote_cmd，则使用内置策略
  #    每台机器生成不同的 PRIVATE_KEY 和 L2_CHAIN_ID=10000+i
  #    命令示意：
  #      cd /home/ubuntu/op-work/scripts/deploy-op-stack &&
  #      PRIVATE_KEY=<pk> L2_CHAIN_ID=<id> ./deploy-with-env.sh
  - type: op
    count: 3
    remoteCmd: ""

  # 2) CDK 部署：这里显式配置 remote_cmd
  - type: cdk
    count: 2
    remoteCmd: >
      cd /home/ubuntu/cdk-work/scripts &&
      L2_CHAIN_ID=10001 L1_CHAIN_ID=71 L1_RPC_URL=https://cfx-testnet-cdk-rpc-proxy.yidaiyilu0.site
      ./deploy.sh cdk-gen

  # 3) 通用服务：必须显式指定 remote_cmd
  - type: generic
    count: 1
    remoteCmd: "cd /home/ubuntu/some-service && ./start.sh"


